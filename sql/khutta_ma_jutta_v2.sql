-- Database Schema for Khutta Ma Jutta - Shoe Inventory System (V2)

-- Users table
CREATE TABLE IF NOT EXISTS users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    password_hash VARCHAR(255) NOT NULL,
    role VARCHAR(20) DEFAULT 'admin',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Brands table
CREATE TABLE IF NOT EXISTS brands (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL UNIQUE
);

-- Shoe Types table
CREATE TABLE IF NOT EXISTS shoe_types (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL UNIQUE
);

-- Categories table
CREATE TABLE IF NOT EXISTS categories (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50) NOT NULL UNIQUE
);

-- Colors table (NEW)
CREATE TABLE IF NOT EXISTS colors (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50) NOT NULL UNIQUE,
    hex_code VARCHAR(7) DEFAULT '#000000'
);

-- Shoes table (Master Product)
CREATE TABLE IF NOT EXISTS shoes (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    brand_id INT,
    type_id INT,
    category_id INT,
    price DECIMAL(10, 2) NOT NULL,
    description TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (brand_id) REFERENCES brands(id) ON DELETE SET NULL,
    FOREIGN KEY (type_id) REFERENCES shoe_types(id) ON DELETE SET NULL,
    FOREIGN KEY (category_id) REFERENCES categories(id) ON DELETE SET NULL
);

-- Shoe Variants (Stock Keeping Units) (NEW)
CREATE TABLE IF NOT EXISTS shoe_variants (
    id INT AUTO_INCREMENT PRIMARY KEY,
    shoe_id INT NOT NULL,
    size INT NOT NULL,
    color_id INT NOT NULL,
    stock_quantity INT NOT NULL DEFAULT 0 CHECK (stock_quantity >= 0),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (shoe_id) REFERENCES shoes(id) ON DELETE CASCADE,
    FOREIGN KEY (color_id) REFERENCES colors(id)
);

-- Initial Data Seeding
INSERT IGNORE INTO users (username, password_hash, role) VALUES 
('admin', '$2y$10$vI8aWBnW3fID.ZQ4/zo1G.q1lRps.9cGLcZEiGDMVr5yUP1KUOYTa', 'admin');

INSERT IGNORE INTO brands (name) VALUES 
('Nike'), ('Adidas'), ('Puma'), ('Goldstar'), ('Reebok');

-- Expanded Types
INSERT IGNORE INTO shoe_types (name) VALUES 
('Basketball'), ('Football'), ('Futsal'), ('Tennis'), ('Running'), ('Casual'), ('Formal'), ('Sandals'), ('Boots');

INSERT IGNORE INTO categories (name) VALUES 
('Men'), ('Women'), ('Children');

INSERT IGNORE INTO colors (name, hex_code) VALUES 
('Black', '#000000'), ('White', '#FFFFFF'), ('Red', '#FF0000'), 
('Blue', '#0000FF'), ('Green', '#008000'), ('Yellow', '#FFFF00'),
('Grey', '#808080'), ('Navy', '#000080'), ('Orange', '#FFA500');

-- V2 Seed Data Generated
INSERT INTO shoes (id, name, brand_id, type_id, category_id, price, description) VALUES 
(1, 'Air Max 90', 1, 1, 1, 15000, ' Imported Product'),
(2, 'Air Force 1', 1, 2, 1, 14500, ' Imported Product'),
(3, 'Pegasus 40', 1, 1, 1, 16000, ' Imported Product'),
(4, 'Revolution 6', 1, 1, 2, 9000, ' Imported Product'),
(5, 'Downshifter 12', 1, 1, 1, 7800, ' Imported Product'),
(6, 'Tanjun', 1, 2, 1, 8200, ' Imported Product'),
(7, 'Court Vision Low', 1, 2, 1, 9200, ' Imported Product'),
(8, 'Winflo 10', 1, 1, 2, 8700, ' Imported Product'),
(9, 'Star Runner 3', 1, 1, 3, 5400, ' Imported Product'),
(10, 'Flex Runner 2', 1, 1, 3, 5200, ' Imported Product'),
(11, 'Air Zoom Structure', 1, 1, 1, 14000, ' Imported Product'),
(12, 'InfinityRN 4', 1, 1, 1, 15000, ' Imported Product'),
(13, 'SB Chron 2', 1, 2, 1, 9600, ' Imported Product'),
(14, 'WearAllDay', 1, 2, 2, 7200, ' Imported Product'),
(15, 'Flex Experience Run', 1, 1, 2, 6900, ' Imported Product'),
(16, 'Pico 5', 1, 2, 3, 4800, ' Imported Product'),
(17, 'Victory Run 3', 1, 1, 1, 8300, ' Imported Product'),
(18, 'Court Legacy', 1, 2, 2, 8800, ' Imported Product'),
(19, 'Zoom Fly 5', 1, 1, 1, 15800, ' Imported Product'),
(20, 'React Infinity Flyknit', 1, 1, 1, 15500, ' Imported Product'),
(21, 'Air Max SC', 1, 2, 1, 9800, ' Imported Product'),
(22, 'Air Zoom Bella', 1, 1, 2, 10500, ' Imported Product'),
(23, 'Nike Precision 6', 1, 1, 1, 8900, ' Imported Product'),
(24, 'Air Monarch IV', 1, 2, 1, 9200, ' Imported Product'),
(25, 'Flex Control TR4', 1, 1, 1, 8600, ' Imported Product'),
(26, 'Superstar', 2, 2, 1, 12000, ' Imported Product'),
(27, 'Stan Smith', 2, 2, 2, 11000, ' Imported Product'),
(28, 'Ultraboost Light', 2, 1, 1, 18500, ' Imported Product'),
(29, 'Run Falcon 3.0', 2, 1, 1, 7600, ' Imported Product'),
(30, 'Gazelle', 2, 2, 1, 12500, ' Imported Product'),
(31, 'Duramo SL', 2, 1, 2, 8500, ' Imported Product'),
(32, 'Galaxy 6', 2, 1, 1, 7900, ' Imported Product'),
(33, 'Hoops 3.0', 2, 2, 1, 9500, ' Imported Product'),
(34, 'Tensaur Sport', 2, 1, 3, 5800, ' Imported Product'),
(35, 'RunFalcon Kids', 2, 1, 3, 5200, ' Imported Product'),
(36, 'Adizero Boston', 2, 1, 1, 14500, ' Imported Product'),
(37, 'Breaknet', 2, 2, 1, 8900, ' Imported Product'),
(38, 'Grand Court', 2, 2, 2, 9200, ' Imported Product'),
(39, 'X_PLR Phase', 2, 2, 1, 10500, ' Imported Product'),
(40, 'Lite Racer Adapt', 2, 1, 2, 7800, ' Imported Product'),
(41, 'Response Runner', 2, 1, 1, 9800, ' Imported Product'),
(42, 'EQ21 Run', 2, 1, 2, 9000, ' Imported Product'),
(43, 'Cloudfoam Pure', 2, 2, 2, 8300, ' Imported Product'),
(44, 'Switch Run', 2, 1, 1, 8800, ' Imported Product'),
(45, 'Run 60s 3.0', 2, 2, 1, 9100, ' Imported Product'),
(46, 'Adilette Slide', 2, 4, 2, 3500, ' Imported Product'),
(47, 'Terrex AX4', 2, 5, 1, 13500, ' Imported Product'),
(48, 'Forum Low', 2, 2, 1, 11500, ' Imported Product'),
(49, 'Predator Edge', 2, 1, 1, 14800, ' Imported Product'),
(50, 'Ultraboost DNA', 2, 1, 1, 17500, ' Imported Product'),
(51, 'RS-X', 3, 1, 1, 12800, ' Imported Product'),
(52, 'Smash v2', 3, 2, 1, 8000, ' Imported Product'),
(53, 'Future Rider', 3, 1, 1, 14500, ' Imported Product'),
(54, 'Carina Street', 3, 2, 2, 7800, ' Imported Product'),
(55, 'Anzarun Lite', 3, 1, 2, 6900, ' Imported Product'),
(56, 'Pacer Future', 3, 1, 1, 8800, ' Imported Product'),
(57, 'X-Ray Lite', 3, 2, 1, 9100, ' Imported Product'),
(58, 'Trinity', 3, 1, 1, 11500, ' Imported Product'),
(59, 'Fun Racer', 3, 1, 3, 5500, ' Imported Product'),
(60, 'Racer Kids', 3, 1, 3, 5600, ' Imported Product'),
(61, 'Flyer Runner', 3, 1, 1, 7200, ' Imported Product'),
(62, 'Twitch Runner', 3, 1, 1, 9500, ' Imported Product'),
(63, 'R78', 3, 2, 1, 8300, ' Imported Product'),
(64, 'Shuffle', 3, 2, 2, 8000, ' Imported Product'),
(65, 'Cilia Mode', 3, 1, 2, 8600, ' Imported Product'),
(66, 'Softride Enzo', 3, 1, 1, 9200, ' Imported Product'),
(67, 'Serve Pro Lite', 3, 2, 1, 8400, ' Imported Product'),
(68, 'LQDCELL Shatter XT', 3, 1, 1, 9900, ' Imported Product'),
(69, 'Evolve Run', 3, 1, 1, 8700, ' Imported Product'),
(70, 'Puma Wired', 3, 2, 2, 7600, ' Imported Product'),
(71, 'Puma Scuderia', 3, 1, 1, 10200, ' Imported Product'),
(72, 'Puma Graviton', 3, 2, 1, 8900, ' Imported Product'),
(73, 'Puma Alpha', 3, 1, 1, 9300, ' Imported Product'),
(74, 'Puma Sandal Pro', 3, 4, 2, 4000, ' Imported Product'),
(75, 'Puma Boot Rider', 3, 5, 1, 12500, ' Imported Product'),
(76, 'Goldstar G10', 4, 1, 3, 1500, ' Imported Product'),
(77, 'Goldstar Schoolmate', 4, 3, 3, 1800, ' Imported Product'),
(78, 'Goldstar Classic Leather', 4, 3, 1, 2600, ' Imported Product'),
(79, 'Goldstar Office Pro', 4, 3, 1, 2700, ' Imported Product'),
(80, 'Goldstar Casual Pro', 4, 2, 1, 2300, ' Imported Product'),
(81, 'Goldstar Ladies Comfort', 4, 2, 2, 2100, ' Imported Product'),
(82, 'Goldstar Sandal Plus', 4, 4, 1, 2000, ' Imported Product'),
(83, 'Goldstar Trek', 4, 5, 1, 3200, ' Imported Product'),
(84, 'Goldstar Velcro Kids', 4, 2, 3, 1400, ' Imported Product'),
(85, 'Goldstar Rain Boot', 4, 5, 2, 3000, ' Imported Product'),
(86, 'Goldstar Slipper', 4, 4, 1, 1800, ' Imported Product'),
(87, 'Goldstar Ladies Soft', 4, 2, 2, 2100, ' Imported Product'),
(88, 'Goldstar Office Lady', 4, 3, 2, 2500, ' Imported Product'),
(89, 'Goldstar School Pro', 4, 3, 3, 1700, ' Imported Product'),
(90, 'Goldstar Comfort Kid', 4, 2, 3, 1600, ' Imported Product'),
(91, 'Goldstar Formal Oxford', 4, 3, 1, 2800, ' Imported Product'),
(92, 'Goldstar Trek Kids', 4, 3, 3, 1600, ' Imported Product'),
(93, 'Goldstar Work Boots', 4, 5, 1, 3600, ' Imported Product'),
(94, 'Goldstar Lady Sandals', 4, 4, 2, 2000, ' Imported Product'),
(95, 'Goldstar Soft Walk Pro', 4, 2, 2, 2200, ' Imported Product'),
(96, 'Goldstar Daily Wear', 4, 2, 1, 2100, ' Imported Product'),
(97, 'Goldstar City Walk', 4, 2, 1, 2250, ' Imported Product'),
(98, 'Goldstar Kids Sport', 4, 1, 3, 1900, ' Imported Product'),
(99, 'Goldstar Trek Pro', 4, 5, 1, 3500, ' Imported Product'),
(100, 'Goldstar Office Max', 4, 3, 1, 2900, ' Imported Product'),
(101, 'Classic Leather', 5, 2, 1, 8500, ' Imported Product'),
(102, 'Club C 85', 5, 2, 1, 9200, ' Imported Product'),
(103, 'Nano X3', 5, 1, 1, 14000, ' Imported Product'),
(104, 'Zig Dynamica', 5, 1, 2, 9800, ' Imported Product'),
(105, 'Floatride Energy', 5, 1, 1, 12000, ' Imported Product'),
(106, 'Energen Lite', 5, 1, 2, 8500, ' Imported Product'),
(107, 'Royal Glide', 5, 2, 1, 7800, ' Imported Product'),
(108, 'Road Supreme', 5, 1, 1, 10200, ' Imported Product'),
(109, 'Rush Runner 4', 5, 1, 3, 5600, ' Imported Product'),
(110, 'Flex Runner Kid', 5, 1, 3, 5400, ' Imported Product'),
(111, 'Reebok Speed TR', 5, 1, 2, 8500, ' Imported Product'),
(112, 'Work N Cushion', 5, 2, 1, 8200, ' Imported Product'),
(113, 'Stride Runner', 5, 1, 1, 8800, ' Imported Product'),
(114, 'Lite Court', 5, 2, 1, 7900, ' Imported Product'),
(115, 'Premier Road', 5, 1, 2, 8200, ' Imported Product'),
(116, 'Fusion Flexweave', 5, 1, 1, 11000, ' Imported Product'),
(117, 'Royal Classic Jog', 5, 2, 3, 5800, ' Imported Product'),
(118, 'Trainflex 2.0', 5, 1, 1, 9600, ' Imported Product'),
(119, 'Reebok Sandal Lite', 5, 4, 2, 3600, ' Imported Product'),
(120, 'Reebok Trek Boot', 5, 5, 1, 13000, ' Imported Product'),
(121, 'Reebok Nano 2.0', 5, 1, 1, 11800, ' Imported Product'),
(122, 'Reebok Glide Pro', 5, 2, 1, 8400, ' Imported Product'),
(123, 'Reebok Active Flex', 5, 1, 2, 8900, ' Imported Product'),
(124, 'Reebok Kids Court', 5, 2, 3, 5200, ' Imported Product'),
(125, 'Reebok Speed Lite', 5, 1, 1, 9800, ' Imported Product');

INSERT INTO shoe_variants (id, shoe_id, size, color_id, stock_quantity) VALUES 
(1, 1, 42, 1, 12),
(2, 2, 43, 2, 10),
(3, 3, 44, 3, 5),
(4, 4, 39, 4, 18),
(5, 5, 42, 5, 22),
(6, 6, 41, 1, 15),
(7, 7, 42, 2, 8),
(8, 8, 39, 3, 11),
(9, 9, 32, 4, 30),
(10, 10, 31, 5, 28),
(11, 11, 44, 1, 7),
(12, 12, 43, 2, 4),
(13, 13, 42, 3, 9),
(14, 14, 38, 4, 17),
(15, 15, 37, 5, 19),
(16, 16, 30, 1, 26),
(17, 17, 41, 2, 14),
(18, 18, 38, 3, 13),
(19, 19, 44, 4, 6),
(20, 20, 43, 5, 5),
(21, 21, 42, 1, 16),
(22, 22, 38, 2, 12),
(23, 23, 44, 3, 15),
(24, 24, 43, 4, 18),
(25, 25, 42, 5, 14),
(26, 26, 42, 1, 15),
(27, 27, 38, 2, 14),
(28, 28, 44, 3, 3),
(29, 29, 43, 4, 20),
(30, 30, 41, 5, 10),
(31, 31, 39, 1, 16),
(32, 32, 42, 2, 19),
(33, 33, 42, 3, 12),
(34, 34, 33, 4, 28),
(35, 35, 32, 5, 30),
(36, 36, 44, 1, 7),
(37, 37, 41, 2, 14),
(38, 38, 38, 3, 11),
(39, 39, 41, 4, 9),
(40, 40, 38, 5, 18),
(41, 41, 43, 1, 10),
(42, 42, 39, 2, 12),
(43, 43, 38, 3, 17),
(44, 44, 44, 4, 13),
(45, 45, 42, 5, 16),
(46, 46, 37, 1, 25),
(47, 47, 44, 2, 6),
(48, 48, 42, 3, 9),
(49, 49, 43, 4, 5),
(50, 50, 44, 5, 4),
(51, 51, 42, 1, 9),
(52, 52, 38, 2, 18),
(53, 53, 44, 3, 5),
(54, 54, 37, 4, 20),
(55, 55, 39, 5, 21),
(56, 56, 43, 1, 15),
(57, 57, 41, 2, 14),
(58, 58, 44, 3, 9),
(59, 59, 32, 4, 30),
(60, 60, 33, 5, 26),
(61, 61, 42, 1, 22),
(62, 62, 44, 2, 11),
(63, 63, 42, 3, 16),
(64, 64, 38, 4, 18),
(65, 65, 38, 5, 13),
(66, 66, 42, 1, 12),
(67, 67, 42, 2, 15),
(68, 68, 43, 3, 8),
(69, 69, 44, 4, 14),
(70, 70, 39, 5, 17),
(71, 71, 43, 1, 10),
(72, 72, 42, 2, 16),
(73, 73, 44, 3, 13),
(74, 74, 38, 4, 19),
(75, 75, 44, 5, 6),
(76, 76, 32, 1, 50),
(77, 77, 34, 2, 45),
(78, 78, 42, 3, 20),
(79, 79, 43, 4, 5),
(80, 80, 41, 5, 22),
(81, 81, 38, 1, 25),
(82, 82, 40, 2, 31),
(83, 83, 44, 3, 12),
(84, 84, 30, 4, 50),
(85, 85, 39, 5, 14),
(86, 86, 42, 1, 40),
(87, 87, 37, 2, 34),
(88, 88, 38, 3, 18),
(89, 89, 33, 4, 42),
(90, 90, 32, 5, 38),
(91, 91, 43, 1, 9),
(92, 92, 31, 2, 29),
(93, 93, 45, 3, 7),
(94, 94, 36, 4, 24),
(95, 95, 39, 5, 26),
(96, 96, 42, 1, 28),
(97, 97, 41, 2, 23),
(98, 98, 33, 3, 31),
(99, 99, 44, 4, 8),
(100, 100, 43, 5, 6),
(101, 101, 44, 1, 5),
(102, 102, 42, 2, 9),
(103, 103, 43, 3, 5),
(104, 104, 39, 4, 12),
(105, 105, 44, 5, 9),
(106, 106, 38, 1, 15),
(107, 107, 42, 2, 18),
(108, 108, 44, 3, 11),
(109, 109, 32, 4, 26),
(110, 110, 31, 5, 30),
(111, 111, 39, 1, 16),
(112, 112, 43, 2, 14),
(113, 113, 42, 3, 13),
(114, 114, 41, 4, 18),
(115, 115, 38, 5, 17),
(116, 116, 44, 1, 7),
(117, 117, 33, 2, 24),
(118, 118, 43, 3, 12),
(119, 119, 37, 4, 20),
(120, 120, 44, 5, 6),
(121, 121, 42, 1, 8),
(122, 122, 41, 2, 15),
(123, 123, 39, 3, 14),
(124, 124, 32, 4, 27),
(125, 125, 44, 5, 11);
